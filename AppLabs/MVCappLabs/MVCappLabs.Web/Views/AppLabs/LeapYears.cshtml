@model MVCappLabs.Web.Models.AppLabs.LeapYearSearchTool

@{
    ViewBag.Title = "LeapYears";
}

<h2>LeapYears</h2>

<div class="row">
    <div class=" col-sm-12">Find the leap years</div>
    <br />
</div>

<div class="row">
    <div class="col-sm-6">
        @using (Html.BeginForm("LeapYears", "AppLabs", FormMethod.Post, new { role = "form" }))
        {
            @Html.ValidationSummary()
            <div class="form-group">
                <label for="StartYear">Start Year</label>
                @Html.TextBoxFor(m => m.StartYear, new { @class = "form-control", placeholder = "Enter the beginning year of your search range" })
            </div>
            <div class="form-group">
                <label for="EndYear">End Year</label>
                @Html.TextBoxFor(m => m.EndYear, new { @class = "form-control", placeholder = "Enter the ending year of your search range" })
            </div>

            if (@Model.IsPostback)
             {
                 <div id="count"  >
                     <div class="form-group">
                         <label for="NumberOfLeaps">Number of Leap Years:</label>
                         @Html.DisplayFor(m => m.Years.Count)
                     </div>
                 </div>
             }
            @*<div class="form-group">
                    <label for="ListOfLeaps">Leap Years: </label>
                    @Html.DisplayFor(m => m.Years)
                </div>*@

            <div class="row">
          
                @foreach (var item in @Model.Years)
                {
                    <ul>
                        <li>@item</li>
                    </ul>
                }
              
            
                
            </div>


           



            <div class="col-sm-9">
                <div class="col-sm-6"><button type="submit" id="leapButton" class="btn btn-default" onclick="unhide(this,'count')" value="unhide">Submit</button></div>
                <div class="col-sm-6"><h5>@Html.ActionLink("Back to App Labs", "Index")</h5></div>
            </div>


        }
    </div>
</div>
@*@if (@Model.IsPostback)
{
    <script>
        function unhide(leapButton, count) {
            var item = document.getElementById(count);
            if (item) {
                if (item.className == 'hidden') {

                    item.className = 'unhidden';

                }

            }
        }
    </script>
}
<script>

    //I think the issue here is that the model is returned to the same view. the view re-renders changing className back to 'hidden'
    //function unhide(leapButton, count) {
    //    var item = document.getElementById(count);
    //    if (item) {
    //        if (item.className == 'hidden') {
             
    //            item.className = 'unhidden';
               
    //        }
          
    //    }
    //}

    var isPostBack = '<%=this.IsPostBack%' == 'True';
    if (isPostBack) {
        function unhide(leapButton, count) {
            var item = document.getElementById(count);
            if (item) {
                if (item.className == 'hidden') {

                    item.className = 'unhidden';

                }

            }
        }
    }
</script>*@
